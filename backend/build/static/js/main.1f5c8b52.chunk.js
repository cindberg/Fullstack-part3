(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{24:function(e,n,t){e.exports=t(35)},35:function(e,n,t){"use strict";t.r(n);var a=t(19),r=t.n(a),o=t(23),u=t(8),c=t(1),l=t.n(c),i=function(e){var n=e.personsToShow,t=e.personsToDelete;return console.log(n),l.a.createElement("div",null,l.a.createElement("ul",null,n.map(function(e){return l.a.createElement("p",{key:e.name},e.name," ",e.number," ",l.a.createElement("button",{onClick:function(){return t(e)}},"delete"))})))},m=function(e){var n=e.addPerson,t=e.handleAddName,a=e.handleAddNumber,r=e.newName,o=e.newNumber;return l.a.createElement("form",{onSubmit:n},l.a.createElement("div",null,"Name:",l.a.createElement("input",{value:r,onChange:t})),l.a.createElement("div",null,"Number: ",l.a.createElement("input",{value:o,onChange:a})),l.a.createElement("div",null,l.a.createElement("button",{type:"submit"}," Add ")))},d=function(e){var n=e.handleFilter;return l.a.createElement("div",null,"filter shown with: ",l.a.createElement("input",{onChange:n}))},f=t(7),s="http://localhost:3001/persons",h=function(){return f.a.get(s).then(function(e){return e.data})},b=function(e){return f.a.post(s,e).then(function(e){return e.data})},p=function(e,n){return f.a.put("".concat(s,"/").concat(e),n).then(function(e){return e.data})},E=function(e){return f.a.delete("".concat(s,"/").concat(e)).then(function(e){return e.data})},v=function(e){var n=e.message;if(null===n)return null;return l.a.createElement("div",{style:{color:"red",background:"lightgrey",fontSize:"20px",borderStyle:"solid",borderRadius:"5px",padding:"10px",marginBottom:"10px"}},n)},w=function(){var e=Object(c.useState)([]),n=Object(u.a)(e,2),t=n[0],a=n[1],r=Object(c.useState)(""),f=Object(u.a)(r,2),s=f[0],w=f[1],g=Object(c.useState)(""),j=Object(u.a)(g,2),O=j[0],N=j[1],S=Object(c.useState)(""),y=Object(u.a)(S,2),k=y[0],A=y[1],C=Object(c.useState)(null),T=Object(u.a)(C,2),x=T[0],D=T[1],P=Object(c.useState)(null),B=Object(u.a)(P,2),F=B[0],I=B[1];Object(c.useEffect)(function(){console.log("effect"),h().then(function(e){return a(e)})},[]);var J=""===k?t:t.filter(function(e){return e.name.toLowerCase().includes(k.toLowerCase())});return l.a.createElement("div",null,l.a.createElement("h2",null,"Phonebook"),l.a.createElement(d,{handleFilter:function(e){A(e.target.value)}}),l.a.createElement(v,{message:x}),l.a.createElement(v,{message:F}),l.a.createElement("h2",null,"Add a new"),l.a.createElement(m,{addPerson:function(e){e.preventDefault();var n={name:s,number:O};if(t.map(function(e){return e.name}).includes(n.name)){if(window.confirm("".concat(n.name," is already added to the phonebook, replace the old number with new one?"))){var r=t.find(function(e){return e.name===e}),u=Object(o.a)({},r,{number:n.number});p(r.id,u).then(function(e){a(t.map(function(n){return n.id===r.id?e:n})),I("Number for ".concat(r.name," was updated")),setTimeout(function(){I(null)},5e3)})}}else b(n).then(function(e){a(t.concat(e))});w(""),N("")},handleAddName:function(e){w(e.target.value)},handleAddNumber:function(e){N(e.target.value)},newName:s,newNumber:O}),l.a.createElement("h3",null,"Numbers"),l.a.createElement(i,{personsToShow:J,personsToDelete:function(e){console.log("test",e),window.confirm("Delete ".concat(e.name,"?"))&&(E(e.id).then(function(n){a(t.filter(function(n){return n.id!==e.id}))}).catch(function(){D("Information of ".concat(e.name," has already been removed from the server")),setTimeout(function(){D(null)},5e3)}),a(t.filter(function(n){return n.id!==e})))},filter:k}))};f.a.get("http://localhost:3001/persons").then(function(e){var n=e.data;r.a.createRoot(document.getElementById("root")).render(l.a.createElement(w,{persons:n}))})}},[[24,2,1]]]);
//# sourceMappingURL=main.1f5c8b52.chunk.js.map